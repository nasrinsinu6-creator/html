<html>
<head>

<title>Online Exam</title>
<style>
  
  
  #container {
    max-width: 700px;
    margin: auto;
    background: #fff;
    padding: 25px 40px;
    border-radius: 10px;
    box-shadow: 0 0 10px rgba(0,0,0,0.2);
  }
  #timer {
    font-size: 22px;
    color: red;
    text-align: center;
  }
  #question {
    font-weight: bold;

  }
  input[type="radio"] {
    margin: 8px 0;
  }
  button {
    margin-top: 15px;
    padding: 8px 18px;
    cursor: pointer;
    background: red;
    color: white;
    border: none;
    border-radius: 5px;
  }
  
  #result {
    font-size: 18px;
    color: blue;
    text-align: center;
  }
</style>
</head>
<body bgcolor="black">

<div id="container">
  <center><h1>Online Exam</h1></center>
  <div id="timer">Time Left: 60s</div>
  <div id="question"></div>

  <form id="quizForm">
    <input type="radio" name="option" value="0" id="opt0"> <label id="lbl0"></label><br>
    <input type="radio" name="option" value="1" id="opt1"> <label id="lbl1"></label><br>
    <input type="radio" name="option" value="2" id="opt2"> <label id="lbl2"></label><br>
    <input type="radio" name="option" value="3" id="opt3"> <label id="lbl3"></label><br><br>
    <button type="button" onclick="prevQuestion()">Previous</button>
    <button type="button" onclick="nextQuestion()">Next</button>
  </form>

  <div id="result"></div>
</div>

<script>
  const questions = [
    { 
    question: "What does HTML stand for?", 
    options: ["Hyperlinks and Text Markup Language", "Hyper Text Markup Language", "Home Tool Markup Language", "Hyper Text Managing Language"],
    answer: 1 
    },
    {
    question: "Which language is used for styling web pages?", 
    options: ["HTML", "CSS", "JavaScript", "Python"],
    answer: 1 
    },
    {
    question: "Which company developed JavaScript?", 
    options: ["Netscape", "Microsoft", "Google", "Apple"],
    answer: 0 
    },
    { 
    question: "Which of these is not a correct HTML tag?", 
    options: [" < b >", "< body >", "< h1 >", "< color >"],
    answer: 3
    },
    {
    question: "What does CSS stand for?", 
    options: ["Creative Style Sheets", "Cascading Style Sheets", "Colorful Style Sheets", "Computer Style Sheets"],
    answer: 1
    },
    { 
    question: "Which tag is used to create a hyperlink in HTML?",
    options: ["< link >", "< a >", "< href >", "< url >"], 
    answer: 1 
    },
    { 
    question: "Inside which HTML element do we put the JavaScript?", 
    options: ["< script >", "< js >", "< javascript >", "< code >"], 
    answer: 0 
    },
    {
    question: "Which symbol is used for comments in JavaScript?",
    options: ["//", "/*", "#", "< !-- -- >"], 
    answer: 0 
    },
    {
    question: "Which property is used to change text color in CSS?", 
    options: ["font-color", "color", "text-color", "background-color"], 
    answer: 1 
    },
    { 
    question: "Which HTML attribute specifies an alternate text for an image?", 
    options: ["title", "alt", "src", "href"],
    answer: 1 
    }
  ];

  let current = 0;
  let score = 0;
  let timeLeft = 60;
  let timerInterval;
  let startTime, endTime;

  function showQuestion() {
    const q = questions[current];
    document.getElementById("question").innerHTML = (current + 1) + ". " + q.question;
    q.options.forEach((opt, i) => {
      document.getElementById("lbl" + i).innerHTML = opt;
      document.getElementById("opt" + i).checked = false;
    });

    if (current === 0 && !timerInterval) {
      startTime = new Date();
      startTimer();
    }
  }

  function startTimer() {
    timerInterval = setInterval(() => {
      timeLeft--;
      document.getElementById("timer").innerHTML = "Time Left: " + timeLeft + "s";

      if (timeLeft <= 0) {
        clearInterval(timerInterval);
        endQuiz(true);
      }
    }, 1000);
  }
  function prevQuestion() {
    if (current === 0) {
        alert("This is the first question.");
        return;
    }


    const selected = document.querySelector('input[name="option"]:checked');
    if (selected) {
        if (parseInt(selected.value) === questions[current].answer) {
            score--; 
        }
    }

    current--;
    showQuestion();

    // Restore previous selection
    const prevSelected = localStorage.getItem('q' + current);
    if (prevSelected !== null && prevSelected !== "null") {
        document.getElementById("opt" + prevSelected).checked = true;
    }
}


function nextQuestion() {
    const selected = document.querySelector('input[name="option"]:checked');
    
    if (selected) {
        localStorage.setItem('q' + current, selected.value); 
        if (parseInt(selected.value) === questions[current].answer) {
            score++;
        }
    } else {
        localStorage.setItem('q' + current, null); 
    }

    current++;
    if (current < questions.length) {
        showQuestion();


        const prevSelected = localStorage.getItem('q' + current);
        if (prevSelected !== null && prevSelected !== "null") {
            document.getElementById("opt" + prevSelected).checked = true;
        }
    } else {
        endQuiz(false);
    }
}
function endQuiz(autoSubmitted) {
    endTime = new Date();
    clearInterval(timerInterval);

    const totalSeconds = Math.floor((endTime - startTime) / 1000);
    const minutes = Math.floor(totalSeconds / 60);
    const seconds = totalSeconds % 60;
    const percentage = Math.round((score / questions.length) * 100);

    document.getElementById("question").style.display = "none";
    document.getElementById("quizForm").style.display = "none";
    document.getElementById("timer").style.display = "none";

    let msg = autoSubmitted ? "<b>Timeâ€™s up!</b><br><br>" : "<b>Quiz Completed!</b><br><br>";
    document.getElementById("result").innerHTML = `
      ${msg}
      <b>Started at:</b> ${startTime.toLocaleTimeString()}<br>
      <b>Ended at:</b> ${endTime.toLocaleTimeString()}<br>
      <b>Total time taken:</b> ${minutes} min ${seconds} sec<br><br>
      <b>Your Score:</b> ${score} / ${questions.length}<br>

      <button onclick="location.reload()">Restart Exam</button>
    `;
  }

  showQuestion();
</script>

</body>
</html>

